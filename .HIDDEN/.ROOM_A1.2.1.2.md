# Example

```
let players = { instigators: {}, observers: {}, receivers: {} }
let interval = 0, chain = [], chainDecay = 12, conceptMax = 100

export function updatePlayerRole(role, key, state) {
  players[role][key] = state
  generate()
}

function generateConcept() { return Math.floor(Math.random() * conceptMax) }

function generate() {
  if ((Object.keys(players.observers).length || Object.keys(players.receivers).length) && Object.keys(players.instigators).length) {
    const concept = generateConcept()
    chain.push(concept)
    const adjust = Math.random()
    if (chain.length > chainDecay) chain.shift()
    chainDecay += Math.random() > 0.5 ? adjust : -adjust
    conceptMax += Math.random() > 0.5 ? adjust : -adjust
    interval++
    if (concept > conceptMax * 0.9) conceptMax *= 1.1
  }
}
```

[Prev](.ROOM_A1.2.1.md)

[Next](.ROOM_A1.2.1.2.1.md)